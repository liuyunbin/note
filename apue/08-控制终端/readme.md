
# 计算机操作系统-终端
* 用户登录时, 系统将一个会话与终端绑定, 此会话进程即为控制进程
* 终端退出时
    * 控制进程: 内核将发送的信号 SIGHUP
    * 前台进程组: 控制进程(bash)将发送 SIGHUP, 如果进程没有退出, 内核将发送 SIGCONT
    * 后台进程组(暂停):  控制进程(Bash)将发送 SIGCONT SIGTERM SIGHUP
    * 后台进程组(运行):  控制进程(Bash)将发送 SIGHUP
* 此会话有且只有一个前台进程组, 有零个或多个后台进程组
* 终端的输入将发送到前台进程组, 前台和后台进程组的输出都将发送到终端
* 新建会话可以脱离终端
* 脱离终端的进程的父进程不一定是 1, 也可能是其他脱离终端的进程
* 脱离终端可以忽略 SIGHUP 或 新建会话
* tcgetpgrp() -- 查看当前会话所关联的控制终端的前台进程组
* tcsetpgrp() -- 设置当前会话所关联的控制终端的前台进程组
    * 前台进程组的进程调用时, 可以成功 -- 01.cc
    * 后台进程组的进程调用时, 该进程组的所有成员将被发送 SIGTTOU
        * 默认情况会暂停该进程 -- 02.cc
        * 捕获此信号并返回, 会反复触发此信号 -- 03.cc
        * 如果忽略此信号, 可以设置成功 -- 04.cc
* tcgetattr() -- 获取终端属性
* tcsetaddr() -- 设置终端属性
* isatty() ----- 判断是否是终端
* 规范模式: 行缓冲, 回写
* 非规范模式: 可改为, 无缓冲, 不回写

