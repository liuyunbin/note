
#include "log.h"

int main() {
    log();
    log("测试存储时的四舍六入五取偶");
    log();

    log("        舍入方向: " + dict_round[fegetround()]);

    test_double(
        "测试 最后一位是 0, 多余位是 00(舍)",
        "0100001100110000000000000000000000000000000000000000000000000000 00");

    test_double(
        "测试 最后一位是 0, 多余位是 01(舍)",
        "0100001100110000000000000000000000000000000000000000000000000000 01");

    test_double(
        "测试 最后一位是 0, 多余位是 10(舍, 取偶)",
        "0100001100110000000000000000000000000000000000000000000000000000 10");

    test_double(
        "测试 最后一位是 0, 多余位是 11(入)",
        "0100001100110000000000000000000000000000000000000000000000000000 11");

    test_double(
        "测试 最后一位是 1, 多余位是 00(舍)",
        "0100001100110000000000000000000000000000000000000000000000000001 00");

    test_double(
        "测试 最后一位是 1, 多余位是 01(舍)",
        "0100001100110000000000000000000000000000000000000000000000000001 01");

    test_double(
        "测试 最后一位是 1, 多余位是 10(入, 取偶)",
        "0100001100110000000000000000000000000000000000000000000000000001 10");

    test_double(
        "测试 最后一位是 1, 多余位是 11(入)",
        "0100001100110000000000000000000000000000000000000000000000000001 11");

    log();
    log("主进程正常退出");
    log();
    return 0;
}
