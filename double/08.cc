
#include "log.h"

int main() {
    log();
    log("测试浮点数的上下限");
    log();

    double x;

    x = std::nextafter(0.1, std::numeric_limits<double>::lowest());
    test_double("0.1 的前一个数", x);

    x = 0.1;
    test_double("0.1", x);

    x = std::nextafter(0.1, std::numeric_limits<double>::max());
    test_double("0.1 的后一个数", x);

    test_double(
        "0.1",
        "0 01111111011 1001100110011001100110011001100110011001100110011010");

    test_double(
        "0.1 的下限(进, 含)",
        "0 01111111011 1001100110011001100110011001100110011001100110011001 1");

    test_double(
        "0.1 的上限(舍, 含)",
        "0 01111111011 1001100110011001100110011001100110011001100110011010 1");

    test_double(
        "测试 4503599627370496",
        "0 10000110011 0000000000000000000000000000000000000000000000000000");

    test_double(
        "测试 4503599627370496 的下限(进, 含)",
        "0 10000110010 1111111111111111111111111111111111111111111111111111 1");

    test_double(
        "测试 4503599627370496 的上限(舍, 含)",
        "0 10000110011 0000000000000000000000000000000000000000000000000000 1");

    test_double(
        "测试 4503599627370497",
        "0 10000110011 0000000000000000000000000000000000000000000000000001");

    test_double(
        "测试 4503599627370497 的下限(舍, 不含)",
        "0 10000110011 0000000000000000000000000000000000000000000000000000 1");

    test_double(
        "测试 4503599627370497 的上限(进, 不含)",
        "0 10000110011 0000000000000000000000000000000000000000000000000001 1");

    log();
    log("主进程正常退出");
    log();
    return 0;
}
